// constructor
function IntrospectionEngine() {
    var self = this;
    self.taskQueue = new Array();
}

// class methods
IntrospectionEngine.prototype.runTasks = function() {
    while (this.taskQueue.length > 0) {
        var task = this.taskQueue.pop();
        task();
    }
};

IntrospectionEngine.prototype.scheduleTask = function(fn, context) {
    var task = function (context) {
        var args = Array.prototype.slice.call(arguments)

        return function (cb) {
            args.push(cb)
            fn.apply(context, args)
        }
    }
    var args = Array.prototype.slice.call(arguments);

    this.taskQueue.push(task.apply(context, args.slice(2)));
};

// export the class
module.exports = IntrospectionEngine;
